# 第8章 密結合 ---絡まって解きほぐせない構造---

## 8.1 密結合と責務

### 8.13 単一責任の原則
### 8.1４ 単一責任の原則違反で生まれる悪魔
### 8.15 責務が単一になるようにクラスを設計する

ロジックの置き場所がちぐはぐになったり、一部のクラスに処理が集中する原因として責務が考慮されていないことがある。
クラスの責務は単一責任の原則に則りひとつに限定するのが良い。

### 8.1６ DRY原則の誤用
**概念**が違うものの重複を無理やり重複削除すると単一責任原則を守れなくなる、ということを認識しておく。

## 8.2 密結合の各種事例と対処方法
### 8.2.1 継承に絡む密結合
* 継承は注意して扱わないと危険。サブクラスはスーパークラスの構造にひどく依存する。
* 継承より移譲を推奨する。利用したいクラスをスーパークラスとして継承するのではなく、privateなインスタンス変数として持ち呼び出すという使い方をする。

### 8.2.2 インスタンス変数ごとにクラス分割可能なロジック
* 責務が異なるメソッド同士を同じクラスに定義しない。図8.11のように関係するものごとにクラスを分離する。

### 8.2.3 なんでもpublicで密結合
* なんでもpublincにすると密結合になる。
* 密結合を避けるためにアクセス修飾子で可視性を適切に制御する。

### 8.2.4 privateメソッドだらけ
* 異なる責務のロジックがprivateメソッドとして実装されることが多い。責務が異なるメソッドは別々のクラスに分離する。

### 8.2.5 高凝集の誤解から来る密結合
* リスト8.28のように販売価格を使い販売手数料・配送料・ショッピングポイントの計算を行なっている。販売価格とは別な概念が紛れて密結合になっている。

### 8.2.6 スマートUI
* 表示責務と表示以外の責務をそれぞれのクラスに分離する(MVVMパターンがある)。